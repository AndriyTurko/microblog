2025-10-19 23:18:21,682 INFO: Microblog startup [in /Users/andrij/work/flaskproject/microblog/app/__init__.py:44]
2025-10-19 23:18:43,159 ERROR: Exception on /register [POST] [in /Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/flask/app.py:1745]
Traceback (most recent call last):
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1968, in _exec_single_context
    cursor, str_statement, effective_parameters, context
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: user.phone_number

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/flask/app.py", line 2529, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/flask/app.py", line 1825, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/flask/app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
  File "/Users/andrij/work/flaskproject/microblog/app/routes.py", line 57, in register
    if form.validate_on_submit():
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/flask_wtf/form.py", line 86, in validate_on_submit
    return self.is_submitted() and self.validate(extra_validators=extra_validators)
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/wtforms/form.py", line 329, in validate
    return super().validate(extra)
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/wtforms/form.py", line 146, in validate
    if not field.validate(self, extra):
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/wtforms/fields/core.py", line 242, in validate
    stop_validation = self._run_validation_chain(form, chain)
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/wtforms/fields/core.py", line 262, in _run_validation_chain
    validator(form, self)
  File "/Users/andrij/work/flaskproject/microblog/app/forms.py", line 33, in validate_username
    user = db.session.scalar(sa.select(User).where(User.username == username.data))
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 1845, in scalar
    **kw,
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2419, in scalar
    **kw,
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2257, in _execute_internal
    conn,
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/orm/context.py", line 307, in orm_execute_statement
    statement, params or {}, execution_options=execution_options
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    execution_options or NO_OPTIONS,
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    self, distilled_params, execution_options
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1651, in _execute_clauseelement
    cache_hit=cache_hit,
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1847, in _execute_context
    dialect, context, statement, parameters
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1987, in _exec_single_context
    e, str_statement, effective_parameters, cursor, context
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1968, in _exec_single_context
    cursor, str_statement, effective_parameters, context
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: user.phone_number
[SQL: SELECT user.id, user.username, user.email, user.phone_number, user.password_hash, user.about_me, user.last_seen 
FROM user 
WHERE user.username = ?]
[parameters: ('admin',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-10-19 23:19:05,866 ERROR: Exception on /login [POST] [in /Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/flask/app.py:1745]
Traceback (most recent call last):
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1968, in _exec_single_context
    cursor, str_statement, effective_parameters, context
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: user.phone_number

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/flask/app.py", line 2529, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/flask/app.py", line 1825, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/flask/app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
  File "/Users/andrij/work/flaskproject/microblog/app/routes.py", line 35, in login
    sa.select(User).where(User.username == form.username.data))
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 1845, in scalar
    **kw,
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2419, in scalar
    **kw,
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2257, in _execute_internal
    conn,
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/orm/context.py", line 307, in orm_execute_statement
    statement, params or {}, execution_options=execution_options
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    execution_options or NO_OPTIONS,
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    self, distilled_params, execution_options
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1651, in _execute_clauseelement
    cache_hit=cache_hit,
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1847, in _execute_context
    dialect, context, statement, parameters
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1987, in _exec_single_context
    e, str_statement, effective_parameters, cursor, context
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1968, in _exec_single_context
    cursor, str_statement, effective_parameters, context
  File "/Users/andrij/work/flaskproject/venv_f/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: user.phone_number
[SQL: SELECT user.id, user.username, user.email, user.phone_number, user.password_hash, user.about_me, user.last_seen 
FROM user 
WHERE user.username = ?]
[parameters: ('admin',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-10-21 17:55:59,371 INFO: Microblog startup [in /Users/andrij/work/flaskproject/microblog/app/__init__.py:44]
